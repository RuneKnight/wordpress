<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>글로벌 스킬 격차: 대화형 대시보드</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Neutral & Tech Blue -->
    <!-- Application Structure Plan: A tab-based single-page application design was chosen to logically segment the report's dense information into four distinct, digestible themes: 1) A main Dashboard for a high-level overview, 2) A Core & Future Skills section for deep comparison, 3) a Skill Gap Perception section to connect quantitative data with qualitative analysis, and 4) a Policy & Strategy section for solutions. This structure enhances usability by allowing users to navigate directly to their area of interest, preventing cognitive overload from a long, scrolling page. The interactive flow is designed to be user-driven, with selections in one component (e.g., a dropdown) dynamically updating related charts and text, fostering exploration and discovery rather than passive reading. -->
    <!-- Visualization & Content Choices: 
        1. Core/Future Skills (Report Sections 1 & 2): Goal: Compare skill priorities. Viz: Interactive Bar Charts (Chart.js) and a Radar Chart (Chart.js). Interaction: A toggle switches between 2025 and 2030 data. A dropdown selects a country to update a bar chart of its top skills. A second dropdown selects a skill to compare across all countries on a radar chart. Justification: This multi-faceted interaction allows for both broad (cross-country) and deep (single-country) analysis, which is more powerful than static tables. Library: Chart.js (Canvas).
        2. Skill Gap Perception (Report Section 3): Goal: Explain the varying levels of concern about the skills gap. Viz: Horizontal Bar Chart (Chart.js) with associated dynamic text blocks. Interaction: Clicking a country's bar reveals a detailed analytical text block below, explaining the root causes for that country. Justification: This directly links the "what" (the data) with the "why" (the analysis), creating an intuitive click-to-discover experience. Library: Chart.js (Canvas) & Vanilla JS.
        3. Policy Preferences (Report Section 4): Goal: Display preferred policy solutions. Viz: A styled card-based layout. Interaction: A dropdown to select a country, which then highlights the corresponding preferred policies in the cards. Justification: A visually clear and simple method for presenting comparative policy data without the need for another complex chart, focusing on readability. Library/Method: HTML/CSS/Tailwind + Vanilla JS.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #F8F7F4;
            color: #333333;
        }
        .nav-link {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .nav-link.active, .nav-link:hover {
            color: #3B82F6;
            border-bottom-color: #3B82F6;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 350px;
                max-height: 60vh;
            }
        }
        .card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .custom-select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
    </style>
</head>
<body class="antialiased">

    <div id="app" class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-2">글로벌 스킬 격차 대시보드</h1>
            <p class="text-lg text-gray-600">기업이 원하는 역량과 노동 시장의 현실에 대한 8개국 비교 분석</p>
        </header>

        <nav class="flex justify-center border-b border-gray-200 mb-12">
            <button data-tab="dashboard" class="nav-link py-4 px-6 text-lg font-medium text-gray-600 active">대시보드</button>
            <button data-tab="skills" class="nav-link py-4 px-6 text-lg font-medium text-gray-600">핵심 역량 비교</button>
            <button data-tab="gap" class="nav-link py-4 px-6 text-lg font-medium text-gray-600">스킬 갭 인식</button>
            <button data-tab="strategy" class="nav-link py-4 px-6 text-lg font-medium text-gray-600">정책 및 전략</button>
        </nav>

        <main>
            <section id="dashboard" class="space-y-12">
                <div class="card p-8 text-center">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">새로운 인재 패러다임의 도래</h2>
                    <p class="text-gray-600 leading-relaxed max-w-4xl mx-auto">
                        세계 경제는 지금 거대한 전환의 소용돌이 속에 있습니다. 2027년까지 전 세계 일자리의 약 4분의 1(23%)이 변화를 겪을 것으로 예측되며, 이 과정에서 6,900만 개의 새로운 일자리가 창출되고 8,300만 개의 일자리가 사라질 것입니다. 이러한 변화의 중심에는 AI, 빅데이터 등 신기술의 폭발적인 채택과 녹색 전환, 지정학적 변화와 같은 거시적 트렌드가 있습니다. 이 대시보드는 대한민국, 독일, 미국, 프랑스, 캐나다, 이탈리아, 영국, 일본 등 주요 8개국의 데이터를 심층 비교 분석하여, 격변의 시대에 기업과 국가가 생존하고 번영하기 위해 무엇을 준비해야 하는지에 대한 통찰을 제공합니다.
                    </p>
                </div>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="card p-6 flex flex-col items-center text-center">
                        <span class="text-5xl mb-4">💡</span>
                        <h3 class="text-xl font-bold mb-2">핵심 역량 비교</h3>
                        <p class="text-gray-600 mb-4 flex-grow">2025년과 2030년, 기업이 가장 중요하게 생각하는 역량은 무엇일까요? 국가별 우선순위를 비교 분석합니다.</p>
                        <button onclick="switchTab('skills')" class="bg-blue-500 text-white font-bold py-2 px-4 rounded-full hover:bg-blue-600 transition-colors">자세히 보기</button>
                    </div>
                    <div class="card p-6 flex flex-col items-center text-center">
                        <span class="text-5xl mb-4">🔍</span>
                        <h3 class="text-xl font-bold mb-2">스킬 갭 인식</h3>
                        <p class="text-gray-600 mb-4 flex-grow">노동 시장의 '스킬 갭'을 각국 기업들은 얼마나 심각한 비즈니스 장벽으로 인식하고 있을까요?</p>
                        <button onclick="switchTab('gap')" class="bg-blue-500 text-white font-bold py-2 px-4 rounded-full hover:bg-blue-600 transition-colors">자세히 보기</button>
                    </div>
                    <div class="card p-6 flex flex-col items-center text-center">
                        <span class="text-5xl mb-4">🏛️</span>
                        <h3 class="text-xl font-bold mb-2">정책 및 전략</h3>
                        <p class="text-gray-600 mb-4 flex-grow">미래 인재 양성을 위해 각국 정부와 기업은 어떤 정책과 전략을 선호하고 있을까요?</p>
                        <button onclick="switchTab('strategy')" class="bg-blue-500 text-white font-bold py-2 px-4 rounded-full hover:bg-blue-600 transition-colors">자세히 보기</button>
                    </div>
                </div>
            </section>

            <section id="skills" class="hidden space-y-12">
                <div class="card p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2 text-center">핵심 역량 비교 분석</h2>
                    <p class="text-gray-600 text-center mb-8 max-w-3xl mx-auto">
                        2025년 현재와 2030년 미래에 요구되는 핵심 역량은 다릅니다. 아래 컨트롤을 사용하여 시간대와 분석 방법을 선택하고, 국가별 또는 역량별로 심층적인 비교를 확인해 보세요. 이를 통해 각국의 '적응 태세'와 '미래 대비 전략'을 파악할 수 있습니다.
                    </p>
                    <div class="flex flex-wrap justify-center items-center gap-4 mb-8 p-4 bg-gray-100 rounded-lg">
                        <div class="flex items-center space-x-2">
                            <label for="skill-year-toggle" class="font-medium text-gray-700">기간:</label>
                            <div class="relative inline-block w-40 text-left">
                                <button id="skill-year-toggle" class="inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none">
                                    2025년 핵심 역량
                                </button>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <label for="skill-country-select" class="font-medium text-gray-700">국가별 분석:</label>
                            <select id="skill-country-select" class="custom-select block w-48 bg-white border border-gray-300 hover:border-gray-400 px-4 py-2 pr-8 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <label for="skill-compare-select" class="font-medium text-gray-700">역량별 비교:</label>
                            <select id="skill-compare-select" class="custom-select block w-48 bg-white border border-gray-300 hover:border-gray-400 px-4 py-2 pr-8 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></select>
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h3 id="skill-country-chart-title" class="text-xl font-semibold text-center mb-4"></h3>
                            <div class="chart-container">
                                <canvas id="skillCountryChart"></canvas>
                            </div>
                        </div>
                        <div>
                            <h3 id="skill-compare-chart-title" class="text-xl font-semibold text-center mb-4"></h3>
                            <div class="chart-container">
                                <canvas id="skillCompareChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="gap" class="hidden space-y-8">
                <div class="card p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2 text-center">스킬 갭 인식도 및 원인 분석</h2>
                    <p class="text-gray-600 text-center mb-8 max-w-3xl mx-auto">
                        '노동 시장의 스킬 갭'을 비즈니스 전환의 장벽으로 인식하는 기업의 비율은 국가별로 큰 차이를 보입니다. 아래 차트에서 국가를 클릭하면, 해당 국가가 직면한 스킬 갭 문제의 근본적인 원인에 대한 심층 분석을 확인할 수 있습니다.
                    </p>
                    <div class="chart-container" style="height: 450px; max-height: 60vh;">
                        <canvas id="gapPerceptionChart"></canvas>
                    </div>
                </div>
                <div id="gap-analysis-content" class="card p-8 hidden">
                    <h3 id="gap-analysis-title" class="text-xl font-bold text-blue-600 mb-4"></h3>
                    <p id="gap-analysis-text" class="text-gray-700 leading-relaxed"></p>
                </div>
            </section>

            <section id="strategy" class="hidden space-y-8">
                 <div class="card p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2 text-center">미래 인재 양성을 위한 정책 및 전략</h2>
                    <p class="text-gray-600 text-center mb-8 max-w-3xl mx-auto">
                        인재 가용성을 높이기 위해 각국 기업들은 어떤 공공 정책을 선호할까요? 아래 드롭다운에서 국가를 선택하여 해당 국가가 가장 선호하는 정책을 확인하고, 기업과 정부를 위한 핵심 전략 권고안을 살펴보세요.
                    </p>
                    <div class="flex justify-center mb-8">
                        <div class="flex items-center space-x-2">
                             <label for="policy-country-select" class="font-medium text-gray-700">국가 선택:</label>
                             <select id="policy-country-select" class="custom-select block w-48 bg-white border border-gray-300 hover:border-gray-400 px-4 py-2 pr-8 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></select>
                        </div>
                    </div>
                    <div id="policy-cards-container" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    </div>
                 </div>
                 <div class="grid md:grid-cols-2 gap-8">
                    <div class="card p-8">
                        <h3 class="text-xl font-bold mb-4 text-center text-blue-600">🏢 기업을 위한 전략</h3>
                        <ul class="space-y-4 text-gray-700">
                            <li class="flex items-start"><span class="mr-3 text-blue-500">✔</span><div><strong>'스킬 중심(Skills-First)' 체계 도입:</strong> 학위가 아닌 역량 기반으로 인재를 발굴, 검증, 개발하여 조직 내외부의 숨겨진 인재를 찾습니다.</div></li>
                            <li class="flex items-start"><span class="mr-3 text-blue-500">✔</span><div><strong>내부 '탤런트 마켓플레이스' 구축:</strong> 부서 경계를 넘어 프로젝트와 직무에 따라 인력을 민첩하게 재배치하여 인재 활용성을 극대화합니다.</div></li>
                            <li class="flex items-start"><span class="mr-3 text-blue-500">✔</span><div><strong>데이터 기반 역량 강화(Upskilling) 투자:</strong> 미래 필요 스킬을 예측하고, 이를 바탕으로 목표 지향적인 재교육 프로그램을 설계합니다.</div></li>
                        </ul>
                    </div>
                    <div class="card p-8">
                        <h3 class="text-xl font-bold mb-4 text-center text-green-600">🏛️ 정부를 위한 정책</h3>
                         <ul class="space-y-4 text-gray-700">
                            <li class="flex items-start"><span class="mr-3 text-green-500">✔</span><div><strong>역동적 '산학연계 동맹' 구축:</strong> 산업계와 교육계 간의 긴밀한 피드백 루프를 만들어 시장 수요에 맞는 인재를 양성합니다.</div></li>
                            <li class="flex items-start"><span class="mr-3 text-green-500">✔</span><div><strong>민첩하고 목표 지향적인 이민 정책 실행:</strong> 국가에 시급하게 필요한 기술을 가진 인재를 신속하고 효과적으로 유치합니다.</div></li>
                            <li class="flex items-start"><span class="mr-3 text-green-500">✔</span><div><strong>유연성과 평생학습을 지원하는 노동법 현대화:</strong> '개인 학습 계좌' 등을 도입하여 노동자들이 변화에 안정적으로 적응할 토대를 마련합니다.</div></li>
                        </ul>
                    </div>
                 </div>
            </section>
        </main>
    </div>

    <script>
        const AppData = {
            countries: ['대한민국', '독일', '미국', '프랑스', '캐나다', '이탈리아', '영국', '일본'],
            skills: {
                '2025': {
                    labels: ['분석적 사고', '창의적 사고', '회복탄력성, 유연성, 민첩성', '동기 부여 및 자기 인식', '리더십 및 사회적 영향력', '호기심 및 평생 학습', '기술 문해력', '공감 및 적극적 경청'],
                    datasets: {
                        '대한민국': [1, 2, 0, 3, 4.1, 5, 0, 0],
                        '독일': [1, 3, 2, 5, 0, 4.1, 0, 0],
                        '미국': [1, 2, 3, 4.1, 0, 5, 0, 0],
                        '프랑스': [2, 0, 1, 3, 4.1, 5, 0, 0],
                        '캐나다': [2, 5, 1, 0, 3, 0, 4.1, 0],
                        '이탈리아': [1, 0, 2, 4.1, 0, 5, 0, 3],
                        '영국': [1, 4.1, 2, 5, 3, 0, 0, 0],
                        '일본': [1, 3, 5, 2, 0, 4.1, 0, 0],
                    }
                },
                '2030': {
                    labels: ['AI 및 빅데이터', '네트워크 및 사이버 보안', '리더십 및 사회적 영향력', '창의적 사고', '회복탄력성, 유연성, 민첩성', '호기심 및 평생 학습', '기술 문해력', '시스템 사고', '환경적 책임', '공감 및 적극적 경청'],
                    datasets: {
                        '대한민국': [75, 63, 69, 75, 0, 0, 0, 63, 0, 0],
                        '독일': [74, 67, 0, 0, 70, 67, 65, 0, 0, 0],
                        '미국': [75, 73, 66, 63, 56, 0, 0, 0, 0, 0],
                        '프랑스': [73, 72, 0, 0, 0, 70, 68, 0, 65, 0],
                        '캐나다': [77, 76, 0, 0, 70, 71, 75, 0, 0, 0],
                        '이탈리아': [67, 67, 0, 0, 61, 54, 0, 0, 0, 54],
                        '영국': [80, 73, 65, 0, 69, 0, 71, 0, 0, 0],
                        '일본': [68, 72, 66, 60, 0, 65, 0, 0, 0, 0],
                    }
                }
            },
            gapPerception: {
                labels: ['캐나다', '영국', '이탈리아', '미국', '독일', '프랑스', '일본', '대한민국'],
                data: [63, 62, 59, 58, 57, 55, 41, 35],
                analysis: {
                    '캐나다': {
                        title: "캐나다: 인구 감소와 높은 인력 이동성",
                        text: "조사 대상국 중 가장 높은 우려(63%)를 표한 캐나다는 낮은 출산율과 고령화로 인한 노동 인구 감소, 그리고 더 나은 근무 환경을 찾아 이직이 잦은 높은 인력 이동성(turnover)이 결합되어 인재 확보 및 유지에 끊임없는 어려움을 겪고 있습니다."
                    },
                    '영국': {
                        title: "영국: 중간 기술직의 '공동화' 현상",
                        text: "영국의 문제(62%)는 중간 수준의 기술직이 급격히 사라지는 '공동화(hollowing out)' 현상으로 특징지어집니다. 기술 발전으로 인해 대체 가능한 직무들이 사라지면서, 서비스 및 기술 경제를 구동하는 데 필수적인 특정 직업 기술과 디지털 역량이 심각한 공급 부족 상태에 빠졌습니다."
                    },
                    '이탈리아': {
                        title: "이탈리아: 구조적 실업과 교육 투자 부족",
                        text: "이탈리아(59%)는 고질적인 구조적 문제를 안고 있습니다. 높은 장기 실업률, 경직된 노동 시장, 그리고 교육 시스템과 시장 수요 간의 심각한 불일치가 지속적인 스킬 갭을 유발합니다. 특히 고등 교육 및 성인 학습에 대한 투자가 OECD 평균보다 현저히 낮아 인력의 질적 향상을 저해합니다."
                    },
                    '미국': {
                        title: "미국: '퍼펙트 스톰' - 구조적 불일치와 인력 유출",
                        text: "미국의 높은 인식도(58%)는 여러 악재가 겹친 '퍼펙트 스톰'의 결과입니다. 교육과 산업 현장 간의 '구조적 불일치'가 심각하며, 팬데믹으로 인한 조기 은퇴 가속화, 제한적인 이민 정책이 겹쳐 노동력의 양과 질 모두에서 심각한 결손이 발생하고 있습니다."
                    },
                    '독일': {
                        title: "독일: '인구 통계학적 시한폭탄'",
                        text: "독일의 도전(57%)은 인구 구조와 전문성의 문제입니다. 급격한 고령화로 산업 경제의 척추인 숙련 기술 인력 '파흐크래프테(Fachkräfte)'의 절대 수가 부족해지고 있으며, 이는 새로운 디지털 기술 수요와 맞물려 '인구 통계학적 시한폭탄'으로 작용하고 있습니다."
                    },
                    '프랑스': {
                        title: "프랑스: 경직된 노동 시장과 수급 불일치",
                        text: "프랑스(55%)는 높은 장기 실업률, 신규 채용을 꺼리게 만드는 경직된 노동 시장, 그리고 교육 시스템과 시장 수요 간의 심각한 불일치가 지속적인 스킬 갭을 유발하는 고질적인 구조적 문제를 안고 있습니다."
                    },
                    '일본': {
                        title: "일본: '활용성'의 문제 - 내부적 스킬 갭",
                        text: "일본의 낮은 인식(41%) 뒤에는 다른 문제가 있습니다. 가장 큰 장벽은 '조직 문화와 변화에 대한 저항'입니다. 문제는 인재의 '가용성'이 아니라, 종신 고용, 연공서열 등 경직된 문화가 인재의 잠재력을 막는 '활용성'의 문제입니다. '내부적 스킬 갭'이 더 심각합니다."
                    },
                    '대한민국': {
                        title: "대한민국: '인재 유인 및 배분'의 불균형",
                        text: "한국의 가장 낮은 인식(35%)은 문제가 없다는 의미가 아닙니다. 가장 큰 비즈니스 장벽은 '산업에 대한 인재 유인 실패'입니다. 우수한 인재들이 소수의 대기업이나 특정 산업으로만 몰리는 심각한 '인재 유인 및 배분'의 불균형이 핵심 문제입니다."
                    }
                }
            },
            policy: {
                labels: [
                    '재교육 및 기술 향상 자금 지원', '공교육 시스템 개선', '이민법 개정',
                    '임금 설정의 유연성', '고용 및 해고 관행의 유연성', '원격근무 관련 노동법 변경',
                    '재교육 및 기술 향상 제공'
                ],
                preferences: {
                    '대한민국': ['재교육 및 기술 향상 제공', '재교육 및 기술 향상 자금 지원', '고용 및 해고 관행의 유연성'],
                    '독일': ['재교육 및 기술 향상 제공'],
                    '미국': ['공교육 시스템 개선'],
                    '프랑스': ['재교육 및 기술 향상 자금 지원'],
                    '캐나다': ['공교육 시스템 개선', '이민법 개정'],
                    '이탈리아': ['재교육 및 기술 향상 자금 지원', '원격근무 관련 노동법 변경'],
                    '영국': ['공교육 시스템 개선', '이민법 개정'],
                    '일본': ['임금 설정의 유연성']
                }
            }
        };

        let skillCountryChart, skillCompareChart, gapPerceptionChart;
        let currentSkillYear = '2025';

        const setupTabs = () => {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('main > section');

            const switchTab = (tabId) => {
                navLinks.forEach(link => {
                    link.classList.toggle('active', link.dataset.tab === tabId);
                });
                sections.forEach(section => {
                    section.classList.toggle('hidden', section.id !== tabId);
                });
            };

            navLinks.forEach(link => {
                link.addEventListener('click', () => switchTab(link.dataset.tab));
            });

            window.switchTab = switchTab;
        };

        const populateSelects = () => {
            const skillCountrySelect = document.getElementById('skill-country-select');
            const skillCompareSelect = document.getElementById('skill-compare-select');
            const policyCountrySelect = document.getElementById('policy-country-select');

            AppData.countries.forEach(country => {
                skillCountrySelect.innerHTML += `<option value="${country}">${country}</option>`;
                policyCountrySelect.innerHTML += `<option value="${country}">${country}</option>`;
            });
            
            updateSkillCompareSelect();
        };

        const updateSkillCompareSelect = () => {
            const skillCompareSelect = document.getElementById('skill-compare-select');
            skillCompareSelect.innerHTML = '';
            AppData.skills[currentSkillYear].labels.forEach(skill => {
                skillCompareSelect.innerHTML += `<option value="${skill}">${skill}</option>`;
            });
        };

        const createSkillCountryChart = () => {
            const ctx = document.getElementById('skillCountryChart').getContext('2d');
            skillCountryChart = new Chart(ctx, {
                type: 'bar',
                data: { labels: [], datasets: [] },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: currentSkillYear === '2025' ? '순위 (낮을수록 중요)' : '수요 증가 예상 기업 비율 (%)' }
                        },
                        y: {
                            ticks: {
                                autoSkip: false,
                                callback: function(value) {
                                    const label = this.getLabelForValue(value);
                                    if (label.length > 16) {
                                        return label.match(/.{1,16}/g);
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if (currentSkillYear === '2025') {
                                        return `순위: ${context.raw}`;
                                    }
                                    return `비율: ${context.raw}%`;
                                }
                            }
                        }
                    }
                }
            });
        };

        const updateSkillCountryChart = (country) => {
            const yearData = AppData.skills[currentSkillYear];
            const countryData = yearData.datasets[country];
            
            let chartData;
            if (currentSkillYear === '2025') {
                chartData = yearData.labels.map((label, i) => ({ label, value: countryData[i] }))
                    .filter(d => d.value > 0)
                    .sort((a, b) => a.value - b.value);
            } else {
                chartData = yearData.labels.map((label, i) => ({ label, value: countryData[i] }))
                    .filter(d => d.value > 0)
                    .sort((a, b) => b.value - a.value);
            }

            skillCountryChart.data.labels = chartData.map(d => d.label);
            skillCountryChart.data.datasets = [{
                data: chartData.map(d => d.value),
                backgroundColor: 'rgba(59, 130, 246, 0.7)',
                borderColor: 'rgba(59, 130, 246, 1)',
                borderWidth: 1
            }];
            
            skillCountryChart.options.scales.x.title.text = currentSkillYear === '2025' ? '순위 (낮을수록 중요)' : '수요 증가 예상 기업 비율 (%)';
            if(currentSkillYear === '2025') skillCountryChart.options.scales.x.reverse = true;
            else skillCountryChart.options.scales.x.reverse = false;

            document.getElementById('skill-country-chart-title').innerText = `${country} - ${currentSkillYear}년 Top 5 역량`;
            skillCountryChart.update();
        };
        
        const createSkillCompareChart = () => {
            const ctx = document.getElementById('skillCompareChart').getContext('2d');
            skillCompareChart = new Chart(ctx, {
                type: 'radar',
                data: { labels: [], datasets: [] },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            pointLabels: {
                                font: { size: 12 }
                            },
                             title: { display: true, text: currentSkillYear === '2025' ? '순위 (0에 가까울수록 중요)' : '수요 증가 예상 기업 비율 (%)' }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if (currentSkillYear === '2025') {
                                        return `${context.dataset.label}: ${6 - context.raw} 순위`;
                                    }
                                    return `${context.dataset.label}: ${context.raw}%`;
                                }
                            }
                        }
                    }
                }
            });
        };

        const updateSkillCompareChart = (skill) => {
            const yearData = AppData.skills[currentSkillYear];
            const skillIndex = yearData.labels.indexOf(skill);
            
            let dataForChart;
            if (currentSkillYear === '2025') {
                dataForChart = AppData.countries.map(country => {
                    const rank = yearData.datasets[country][skillIndex];
                    return rank > 0 ? 6 - rank : 0;
                });
            } else {
                dataForChart = AppData.countries.map(country => yearData.datasets[country][skillIndex]);
            }

            skillCompareChart.data.labels = AppData.countries;
            skillCompareChart.data.datasets = [{
                label: skill,
                data: dataForChart,
                backgroundColor: 'rgba(239, 68, 68, 0.2)',
                borderColor: 'rgba(239, 68, 68, 1)',
                borderWidth: 2,
                pointBackgroundColor: 'rgba(239, 68, 68, 1)'
            }];
            
            skillCompareChart.options.scales.r.title.text = currentSkillYear === '2025' ? '중요도 (바깥으로 갈수록 높음)' : '수요 증가 예상 기업 비율 (%)';
            if(currentSkillYear === '2025') {
                skillCompareChart.options.scales.r.max = 5;
                skillCompareChart.options.scales.r.ticks = { stepSize: 1, callback: (value) => value > 0 ? `${6-value}순위` : '' };
            } else {
                skillCompareChart.options.scales.r.max = 100;
                skillCompareChart.options.scales.r.ticks = { stepSize: 20, callback: (value) => `${value}%` };
            }
            
            document.getElementById('skill-compare-chart-title').innerText = `'${skill}' 역량 국가별 비교 (${currentSkillYear}년)`;
            skillCompareChart.update();
        };

        const createGapPerceptionChart = () => {
            const ctx = document.getElementById('gapPerceptionChart').getContext('2d');
            gapPerceptionChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: AppData.gapPerception.labels,
                    datasets: [{
                        label: '스킬 갭을 비즈니스 장벽으로 인식하는 기업 비율 (%)',
                        data: AppData.gapPerception.data,
                        backgroundColor: AppData.gapPerception.data.map(d => d > 60 ? 'rgba(239, 68, 68, 0.7)' : d > 50 ? 'rgba(249, 115, 22, 0.7)' : 'rgba(59, 130, 246, 0.7)'),
                        borderColor: AppData.gapPerception.data.map(d => d > 60 ? 'rgba(239, 68, 68, 1)' : d > 50 ? 'rgba(249, 115, 22, 1)' : 'rgba(59, 130, 246, 1)'),
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: { beginAtZero: true, max: 70, title: { display: true, text: '기업 비율 (%)' } },
                        y: { ticks: { font: { size: 14 } } }
                    },
                    plugins: { legend: { display: false } },
                    onClick: (event, elements) => {
                        if (elements.length > 0) {
                            const index = elements[0].index;
                            const country = AppData.gapPerception.labels[index];
                            const analysis = AppData.gapPerception.analysis[country];
                            
                            const analysisContent = document.getElementById('gap-analysis-content');
                            document.getElementById('gap-analysis-title').innerText = analysis.title;
                            document.getElementById('gap-analysis-text').innerText = analysis.text;
                            analysisContent.classList.remove('hidden');
                        }
                    }
                }
            });
        };
        
        const createPolicyCards = () => {
            const container = document.getElementById('policy-cards-container');
            container.innerHTML = '';
            AppData.policy.labels.forEach(policy => {
                const card = `
                    <div id="policy-${policy.replace(/\s/g, '-')}" class="card p-6 transition-all duration-300">
                        <h4 class="font-bold text-lg">${policy}</h4>
                    </div>
                `;
                container.innerHTML += card;
            });
        };

        const updatePolicyView = (country) => {
            const preferredPolicies = AppData.policy.preferences[country];
            document.querySelectorAll('#policy-cards-container .card').forEach(card => {
                card.classList.remove('bg-blue-100', 'border-2', 'border-blue-500', 'scale-105');
                card.classList.add('bg-white');
            });

            preferredPolicies.forEach(policy => {
                const cardId = `policy-${policy.replace(/\s/g, '-')}`;
                const cardElement = document.getElementById(cardId);
                if (cardElement) {
                    cardElement.classList.add('bg-blue-100', 'border-2', 'border-blue-500', 'scale-105');
                    cardElement.classList.remove('bg-white');
                }
            });
        };

        const setupEventListeners = () => {
            document.getElementById('skill-country-select').addEventListener('change', (e) => {
                updateSkillCountryChart(e.target.value);
            });
            
            document.getElementById('skill-compare-select').addEventListener('change', (e) => {
                updateSkillCompareChart(e.target.value);
            });

            const toggleButton = document.getElementById('skill-year-toggle');
            toggleButton.addEventListener('click', () => {
                currentSkillYear = currentSkillYear === '2025' ? '2030' : '2025';
                toggleButton.innerText = `${currentSkillYear}년 ${currentSkillYear === '2025' ? '핵심 역량' : '미래 수요 역량'}`;
                updateSkillCompareSelect();
                updateSkillCountryChart(document.getElementById('skill-country-select').value);
                updateSkillCompareChart(document.getElementById('skill-compare-select').value);
            });
            
            document.getElementById('policy-country-select').addEventListener('change', (e) => {
                updatePolicyView(e.target.value);
            });
        };

        document.addEventListener('DOMContentLoaded', () => {
            setupTabs();
            populateSelects();
            
            createSkillCountryChart();
            createSkillCompareChart();
            createGapPerceptionChart();
            createPolicyCards();

            setupEventListeners();
            
            updateSkillCountryChart(AppData.countries[0]);
            updateSkillCompareChart(AppData.skills[currentSkillYear].labels[0]);
            updatePolicyView(AppData.countries[0]);
        });
    </script>
</body>
</html>